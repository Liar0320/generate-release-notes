name: Test Marketplace Action

on:
  workflow_dispatch:
    inputs:
      base_branch:
        description: 'Base branch to compare against'
        default: 'main'
        type: choice
        options:
          - main
          - develop

jobs:
  test:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout repository
        uses: actions/checkout@v3
        with:
          fetch-depth: 0

      - name: Generate Release Notes from marketplace
        uses: Liar0320/generate-release-notes@v1.0.1
        id: release
        with:
          base-branch: ${{ github.event.inputs.base_branch || 'main' }}
          output-file: RELEASE_NOTES.md

      - name: Display Release Notes file
        run: |
          echo "=== 生成的 Release Notes 文件 ==="
          cat RELEASE_NOTES.md
