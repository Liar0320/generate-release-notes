name: 'Generate Release Notes'
description: 'Automatically generate changelog from commits between main branch and current branch'
author: 'Liar0320'
branding:
  icon: 'file-text'
  color: 'green'

inputs:
  base-branch:
    required: false
    default: 'main'
    description: 'Base branch to compare against (default: main)'
  output-file:
    required: false
    default: ''
    description: 'Path to write complete changelog with metadata to file (e.g., RELEASE_NOTES.md). Leave empty to skip file generation'

outputs:
  changelog:
    description: 'Pure changelog content in markdown format (only commit entries)'
    value: ${{ steps.changelog.outputs.changelog }}
  release-notes:
    description: 'Complete release notes with metadata header and footer'
    value: ${{ steps.changelog.outputs.release-notes }}
  changelog-file:
    description: 'Path to the generated release notes file (if output-file is specified)'
    value: ${{ steps.changelog.outputs.changelog-file }}

runs:
  using: composite
  steps:
    - name: Generate changelog from commits
      id: changelog
      shell: bash
      run: "${{ github.action_path }}/script.sh ${{ inputs.base-branch }} ${{ inputs.output-file }}"
